### imageの分け方
2層以上にイメージを分離することでコンテナの可搬性を向上することができる
- ミドルウェアや言語ランタイムを含むベースイメージ層
- アプリケーションソースコードを含むイメージ層

ミドルウェア・言語ランタイムのみをDocker管理して、ソースコードをバインドマウントする方法もあるが、  
この方法ではバインドマウントを利用できないような環境(FagateやLambdaなど)では利用できない  

アプリケーションソースコードを含むイメージにするのが良いが、セキュリティやバージョン管理には注意を払う必要がある  

### ベースイメージ
公式イメージをベースに、
- ユーザー作成
- 必要パッケージのインストール
- 言語設定のインストール・設定

ミドルウェアや言語ランタイムを含むベースイメージ層は以下に注意を払い構築する
- 各ミドルウェア・言語の公式やDocker社が管理している公式イメージを利用する
- 機密情報・クレデンシャルをイメージに含まないようにする

構築したイメージはコンテナレジストリで管理する(このレジストリの可視性はどちらでも構わない)  

### 配信イメージ
上記で作成したベースイメージを利用して、ソースコードをコピーしてイメージをビルドする  
またエントリーポイントをオーバーライドすることで、秘密鍵の取得や、configやrouteのキャッシュ化などを実行することができる  
