### Queue,Redis
<!-- {ISSUEタイトル}.md になります -->
<!-- ISSUEラベル名に対応するディレクトリに格納されます -->
<!-- ISSUEタイトルに`###`を足して、descriptionの1行目に自動追記します -->

メールがローカル環境では送信されないがクラウド環境では送信できるということがあった。  

このときローカル環境ではメール送信確認用サーバとしてMailHogコンテナを利用していた。  
最初はこのサーバへの接続がうまくできていないのかと思ったがどうやら設定は正常そうだった。  
ユーザ追加時にもメールが送信されるようになっており、こちらはローカル環境のMailHogにも正常に送信されていた。  
原因は`.env` に記述している `QUEUE_CONNECTION`がredisになっていることだった。  
※クラウド環境はredisを使っていないのでsyncにしていた。  

QUEUEをredisに設定しているとエンキューは正常に行われるが、デキューするワーカーがどこにもないので、永久にキューにタスクがたまり続けることになる。  
一旦は`.env`の`QUEUE_CONNECTION`を`sync`にすることで解消したが、本番環境の接続数が増加するようならQueueワーカーを別サーバで稼働させてデキューして処理をする必要がある。  

