### キャッシュ設定の注意点
<!-- {ISSUEタイトル}.md になります -->
<!-- ISSUEラベル名に対応するディレクトリに格納されます -->
<!-- ISSUEタイトルに`###`を足して、descriptionの1行目に自動追記します -->

wordpressとnginxの公式ドキュメントを読みつつ、nginx.conf, global/registratoins.conf, global/wordpress.conf を作成した  
その中で、以下の設定をそのまま適用した  

```
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires max;
        log_not_found off;
    }
```

その後、cssの修正を行ったがキャッシュのせいで反映されない問題が起きた  
原因は expires が max になっていること  
この設定だと、１５年後くらいまでキャッシュされることになっており、問答無用でcssの変更が反映されなくなってしまった  
`問題なのは、すでにページを開いたエンドユーザーのブラウザにキャッシュが残ってしまうので、変更後の状態を見ることができなくなってしまった`  

本来は、css等に変更があった場合のみコンテンツを取得する状態にしたい  
これは初回のコンテンツ取得時(キャッシュがないとき)にアクセスすると、`ETag`というレスポンスヘッダがついて返却される  
ブラウザは次回のコンテンツ取得リクエスト時に `If-None-Match` ヘッダにETagの値を入れてリクエストする  
サーバ側で値が変わっていなければ、コンテンツに変更がないと見なし、 `304 Not Modified` のみを返却する。コンテンツは返却せずキャッシュが利用される  
ETagの値がマッチしなければコンテンツに変更があったと見なし、200でコンテンツを返却する  
*expires を 0 にしておくとリクエストのたびに上記の確認フローが実行されるようになる*  
```
    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 0;
        log_not_found off;
    }
``` | tr " ' 
